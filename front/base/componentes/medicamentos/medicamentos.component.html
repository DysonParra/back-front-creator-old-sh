<div id="form-container">
  <dx-data-grid id="gridContainer" [columnWidth]="120" [showBorders]="true" [showRowLines]="true"
    [hoverStateEnabled]="true" [allowColumnReordering]="true" [rowAlternationEnabled]="true"
    [dataSource]="coleccionMedicamentos" keyExpr="intId" (onEditorPreparing)="editorPreparing($event)"
    (onRowInserting)="rowInserting($event)" (onRowInserted)="rowInserted($event)" (onInitNewRow)="initNewRow($event)"
    (onRowUpdating)="rowUpdating($event)" (onRowUpdated)="rowUpdated($event)" (onEditingStart)="editingStart($event)"
    (onRowRemoving)="rowRemoving($event)" (onRowRemoved)="rowRemoved($event)" (onRowValidating)="rowValidating($event)">
    <dxo-paging [enabled]="false" [pageSize]="100"></dxo-paging>
    <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[5, 10, 20, 50, 100, 500]"
      [showNavigationButtons]="true" [showInfo]="true"></dxo-pager>
    <dxo-paging [enabled]="false"></dxo-paging>
    <dxo-selection mode="single"></dxo-selection>
    <dxo-sorting mode="multiple"></dxo-sorting>
    <dxo-editing mode="form" [allowUpdating]="allowUpdating" [allowDeleting]="allowDeleting" [allowAdding]="allowAdding"
      [useIcons]="true"></dxo-editing>
    <dxo-filter-row [visible]="true"></dxo-filter-row>
    <dxo-header-filter [visible]="true"></dxo-header-filter>
    <dxo-search-panel [visible]="true" [width]="240" placeholder="Buscar..."></dxo-search-panel>
    <dxo-group-panel [visible]="true"></dxo-group-panel>
    <dxo-state-storing [enabled]="true" type="localStorage" storageKey="storage"></dxo-state-storing>
    <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[5, 10, 20, 50, 100]" [showInfo]="true">
    </dxo-pager>
    <dxo-column-chooser [enabled]="true" mode="select"></dxo-column-chooser>
    <dxo-export [enabled]="true"></dxo-export>

    <!-- <dxo-state-storing [enabled]="true" type="localStorage" storageKey="storage"></dxo-state-storing> -->
    <!-- <dxo-scrolling columnRenderingMode="virtual"></dxo-scrolling> -->

    <dxi-column dataField="intId" caption="intId">
      <dxi-validation-rule type="custom" [validationCallback]="validateId" message="Escriba un valor vÃ¡lido">
      </dxi-validation-rule>
      <!--
      <dxi-validation-rule type="async"
        [validationCallback]="validateUniqueId"
        message="Ya existe un registro con el id indicado">
      </dxi-validation-rule>
      -->
    </dxi-column>
<dxi-column>%columns%</dxi-column>
    <dxi-column type="buttons" caption="botones" [width]="80">

    <!--
    <dxi-column dataField="idForeignKey" caption="idForeignKey" [width]="130" [visible]="true"
      editCellTemplate="foreignkeysDropDownBoxEditor">
      <dxi-validation-rule type="async" [validationCallback]="validateForeignKey"
        message="No existe un registro con el id indicado">
      </dxi-validation-rule>
    </dxi-column>
    -->
      <!--
    <dxi-button
        text="Medicamento"
        [visible]="esMedicamentoVisible"
        [onClick]="medicamentoOnClick">
    </dxi-button>
    -->
    </dxi-column>

    <!--
    <div *dxTemplate="let cellInfo of 'foreignkeysDropDownBoxEditor'">
      <dx-drop-down-box (onInitialized)="onSelectionChanged($event.selectedRowKeys, cellInfo, null)"
        (onOpened)="updateForeignKeys()" [showClearButton]="true" [dataSource]="coleccionForeignKeys"
        [(value)]="cellInfo.value" displayExpr="idForeignKey" valueExpr="idForeignKey"
        contentTemplate="contentTemplate">
        <div *dxTemplate="let e of 'contentTemplate'">
          <dx-data-grid keyExpr="idForeignKey" [dataSource]="coleccionForeignKeys" [remoteOperations]="true"
            [height]="250" [selectedRowKeys]="[cellInfo.value]" [focusedRowEnabled]="true"
            [focusedRowKey]="cellInfo.value" [hoverStateEnabled]="true"
            (onSelectionChanged)="onSelectionChanged($event.selectedRowKeys, cellInfo, e.component)">
            <dxi-column dataField="idForeignKey" caption="idForeignKey"></dxi-column>
            <dxi-column dataField="strNombre" caption="strNombre"></dxi-column>
            <dxo-paging [enabled]="true" [pageSize]="10"></dxo-paging>
            <dxo-scrolling mode="virtual"></dxo-scrolling>
            <dxo-selection mode="single"></dxo-selection>
          </dx-data-grid>
        </div>
      </dx-drop-down-box>
    </div>
    -->

  </dx-data-grid>
  <dx-load-panel #loadPanel shadingColor="rgba(0,0,0,0.4)" [position]="{ of: '#body' }" [(visible)]="loadingVisible"
    [showIndicator]="true" [(message)]="loadingMessage" [showPane]="true" [shading]="true"
    [closeOnOutsideClick]="false">
  </dx-load-panel>
</div>